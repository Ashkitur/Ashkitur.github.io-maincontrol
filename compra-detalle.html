<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Aim Control - Detalle de Compra</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="cssweb/footerheader.css" />
  <link rel="stylesheet" href="cssweb/Stepper.css" />
  <link rel="stylesheet" href="cssweb/compra-detalle.css" />
</head>
<body>

  <!-- NAV -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-black py-2">
    <div class="container-fluid px-3">
      <a class="navbar-brand d-flex align-items-center gap-2 fw-bold" href="index.html" id="texto-logito">
        <img src="img/LogoPrincipal/ICON.png" alt="Logo Aim Control" width="64" height="64" class="img-fluid">
        <span>Aim Control</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
              aria-expanded="false" aria-label="Menú">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse mt-3 mt-lg-0" id="navbarNavAltMarkup">
        <div class="vr mx-3 bg-white d-none d-lg-block opacity-50"></div>
        <div class="navbar-nav mx-auto text-center gap-lg-1">
          <a class="nav-link d-flex align-items-center gap-2" href="index.html?plataforma=all" >
            <img src="img/Logos/computadora-para-juegos.png" width="34" height="34" alt="">Todas las plataformas
          </a>
          <a class="nav-link d-flex align-items-center gap-2" href="PC.html?plataforma=PC">
            <img src="img/Logos/logotipo-de-steam.png" width="26" height="26" alt="">PC
          </a>
          <a class="nav-link d-flex align-items-center gap-2" href="PlayStation.html?plataforma=PlayStation">
            <img src="img/Logos/consoles-ps-512.png" width="26" height="26" alt="">PlayStation
          </a>
          <a class="nav-link d-flex align-items-center gap-2" href="Xbox.html?plataforma=Xbox">
            <img src="img/Logos/logotipo-de-xbox.png" width="26" height="26" alt="">Xbox
          </a>
          <a class="nav-link d-flex align-items-center gap-2" href="NintendoSwitch.html?plataforma=NintendoSwitch">
            <img src="img/Logos/nintendo-switch.png" width="40" height="34" alt="">Nintendo Switch
          </a>
        </div>
        <div class="d-flex justify-content-center mt-3 mt-lg-0">
            <a class="nav-link d-flex align-items-center gap-2" href="compra-detalle.html">
              <div class="icon-box bg-accent d-inline-flex justify-content-center align-items-center">
                <img src="img/Logos/carrito-de-compras.png" alt="Carrito" width="26" height="26">
              </div>
            </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- CONTENIDO -->
  <main class="py-5">
    <div class="container">
      <header class="mb-4 text-center text-lg-start">
        <h1 class="titulo-pagina mb-2">Carrito de Compra</h1>
        <p class="text-muted subtitulo-pagina mb-0">Revisa tus productos antes de proceder al pago.</p>
      </header>

      <div class="row g-5">
        <!-- LISTA -->
        <section class="col-12 col-xl-8">
          <div class="cart-panel">
            <div class="cart-header d-none d-md-grid">
              <span>Portada</span>
              <span>Nombre</span>
              <span>Cantidad</span>
              <span>Precio</span>
              <span>Subtotal</span>
              
             
            </div>

            <!-- Contenedor dinámico -->
            <div id="detail" class="cart-body">
              <!-- El JS llena aquí las filas -->
            </div>

            <div class="cart-footer text-end mt-3 d-none" id="cart-footer-extra">
              <!-- Espacio opcional para cupones o notas -->
            </div>
          </div>
        </section>

        <!-- RESUMEN -->
        <aside class="col-12 col-xl-4">
          <div class="summary-card">
            <h2 class="summary-title">Total de pago</h2>

            <div class="summary-line">
              <span>Precio neto</span>
              <strong id="total-neto">$0.00</strong>
            </div>
            <div class="summary-line">
              <span>Impuesto por servicio</span>
              <strong id="impuesto-acobrar">$0.00</strong>
            </div>
            <div class="summary-total">
              <span>Total</span>
              <strong id="total-compra">$0.00</strong>
            </div>

            <button class="btn btn-accent w-100 mt-3" id="btnProceder" disabled>
              Proceder al pago
            </button>
          

            <button type="button" class="btn btn-link text-decoration-none mt-3 volver-btn"
                    onclick="window.history.back()">
              ← Regresar a comprar
            </button>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="footer text-white mt-auto">
    <div class="container py-4">
      <div class="row gy-4 align-items-start">
        <div class="col-12 col-md-4">
          <h5 class="fw-bold mb-2">Aim Control</h5>
          <ul class="list-unstyled footer-links mb-0">
            <li><a href="acercade.html">Acerca de</a></li>
            <li><a href="contactenos.html">Contáctenos</a></li>
          </ul>
        </div>
        <div class="col-12 col-md-4">
          <h6 class="text-secondary mb-2">Ofertas personalizadas</h6>
          <form class="d-flex flex-column flex-sm-row gap-2">
            <input type="email" class="form-control form-control-sm" placeholder="correo@ejemplo.com" aria-label="Correo">
            <button type="button" class="btn btn-accent btn-sm">Suscribirse</button>
          </form>
        </div>
        <div class="col-12 col-md-4">
          <h6 class="text-secondary mb-2">Síguenos</h6>

          <div class="d-flex flex-wrap gap-3">
        <a href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
          <img src="img/Logos/facebook.png" width="30" height="30" alt="Facebook">
        </a>
        <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
          <img src="img/Logos/twitter.png" width="30" height="30" alt="Twitter">
        </a>
        <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <img src="img/Logos/instagram.png" width="30" height="30" alt="Instagram">
        </a>
        <a href="https://www.youtube.com/watch?v=2XhVg38cDTU" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
          <img src="img/Logos/youtube.png" width="30" height="30" alt="YouTube">
        </a>
      </div>
          
        </div>
      </div>
      <hr class="footer-divider my-4">
      <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center gap-3 small">
        <p class="mb-0">&copy; 2023 Aim Control. Todos los derechos reservados.</p>
        <div class="d-flex align-items-center flex-wrap gap-2">
          <span class="text-accent fw-semibold">Canales</span>
          <img src="img/Otros/visa.png" width="36" height="36" alt="Visa">
            <img src="img/Otros/logotipo-de-paypal.png" width="36" height="36" alt="PayPal">
          <img src="img/Otros/pago-de-apple.png" width="36" height="36" alt="Apple Pay">
          <img src="img/Otros/redondo.png" width="36" height="36" alt="Mastercard">
        </div>
      </div>
    </div>
  </footer>

  <!-- SCRIPTS (no modificados) -->
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="json/digitalkey.juegos.js"></script>
  <script src="javascript/compra.js"></script>
  <script src="javascript/compra-detalle.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', showDetail);
  </script>


<script>

  function actualizarBotonProceder() {
    const btn = document.getElementById('btnProceder');
    const cart = getCart() || []; 

    if (cart.length > 0) {
      btn.disabled = false;
      btn.onclick = function() {
        window.location.href = 'Compra.html';
      };
    } else {
      btn.disabled = true;
      btn.onclick = null;
    }
  }


  document.addEventListener('DOMContentLoaded', actualizarBotonProceder);
 
  function eliminarItem(idJuego) {
    let cartArray = getCart() || [];
    cartArray = cartArray.filter(item => item.id !== idJuego);
    
    saveCart(cartArray);
    showDetail();
    actualizarBotonProceder(); 
  }
</script>



</body>
</html>