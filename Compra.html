<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Zona de Compra</title>
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="cssweb/footerheader.css" />
  <link rel="stylesheet" href="cssweb/Stepper.css" />
    <link rel="stylesheet" href="cssweb/indexstyles.css" />
  <link rel="stylesheet" href="cssweb/ZonaCompra.css" />
  <link rel="stylesheet" href="cssweb/pago-responsive.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-black">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center gap-2" href="index.html" id="texto-logito" style="font-weight:700;">
      <img src="img/LogoPrincipal/ICON.png" alt="Logo" width="64" height="64" />
      <span>Aim Control</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="vr mx-3 bg-white d-none d-lg-block" style="opacity:.4;"></div>
      <div class="navbar-nav mx-auto text-center">
        <a class="nav-link d-flex align-items-center gap-2 active" href="index.html?plataforma=all">
          <img src="img/Logos/computadora-para-juegos.png" width="36" height="36" alt="">Todas las plataformas
        </a>
        <a class="nav-link d-flex align-items-center gap-2" href="PC.html?plataforma=PC">
          <img src="img/Logos/logotipo-de-steam.png" width="28" height="28" alt="">PC
        </a>
        <a class="nav-link d-flex align-items-center gap-2" href="PlayStation.html?plataforma=PlayStation">
          <img src="img/Logos/consoles-ps-512.png" width="28" height="28" alt="">PlayStation
        </a>
        <a class="nav-link d-flex align-items-center gap-2" href="Xbox.html?plataforma=Xbox">
          <img src="img/Logos/logotipo-de-xbox.png" width="28" height="28" alt="">Xbox
        </a>
        <a class="nav-link d-flex align-items-center gap-2" href="NintendoSwitch.html?plataforma=NintendoSwitch">
          <img src="img/Logos/nintendo-switch.png" width="40" height="34" alt="">Nintendo Switch
        </a>
      </div>
      <a class="nav-link ms-lg-3" href="compra-detalle.html">
        <div class="icon-box" style="background:#df6011;padding:9px;border-radius:15px;">
          <img src="img/Logos/carrito-de-compras.png" width="30" height="30" alt="Carrito">
        </div>
      </a>
    </div>
  </div>
</nav>

<main class="py-4">
  <div class="container">
    <!-- Stepper -->
    <div class="stepper d-flex flex-wrap gap-4 justify-content-center mb-4">
      <div class="step active"><span class="circle">2</span><p class="mt-2 mb-0">Información</p></div>
      <div class="step"><span class="circle">3</span><p class="mt-2 mb-0">Confirmación</p></div>
      <div class="step"><span class="circle">4</span><p class="mt-2 mb-0">Envío</p></div>
    </div>

    <div class="row g-4">
      <!-- Columna principal -->
      <div class="col-12 col-lg-8">
        <!-- Métodos -->
        <fieldset class="metodos-pago" aria-label="Métodos de pago">
          <legend class="visually-hidden">Selecciona método de pago</legend>
          <label class="opcion-pago">
            <input type="radio" name="metodo_pago" value="tarjeta" checked>
            <span class="contenido-opcion">
              <span class="iconos-pago">
                <i class="fab fa-cc-visa"></i>
                <i class="fab fa-cc-mastercard"></i>
              </span>
              <span>Tarjeta</span>
            </span>
          </label>
          <label class="opcion-pago">
            <input type="radio" name="metodo_pago" value="paypal">
            <span class="contenido-opcion">
              <span class="iconos-pago">
                <i class="fab fa-cc-paypal"></i>
              </span>
              <span>PayPal</span>
            </span>
          </label>
          <label class="opcion-pago">
            <input type="radio" name="metodo_pago" value="movil">
            <span class="contenido-opcion">
              <span class="iconos-pago">
                <i class="fab fa-apple-pay"></i>
                <i class="fab fa-google-pay"></i>
              </span>
              <span>Pago Móvil</span>
            </span>
          </label>
        </fieldset>

        <!-- FORM TARJETA -->
        <form id="form-tarjeta" class="formulario-tarjeta formulario-pago activo" novalidate>
          <div class="mb-3">
            <label class="etiqueta-formulario" for="numero-tarjeta">Número de Tarjeta</label>
            <input type="text" id="numero-tarjeta" class="campo-formulario form-control" placeholder="1234 5678 9012 3456" required inputmode="numeric" autocomplete="cc-number">
          </div>
          <div class="mb-3">
            <label class="etiqueta-formulario" for="titular-tarjeta">Titular de tarjeta</label>
            <input type="text" id="titular-tarjeta" class="campo-formulario form-control" placeholder="Nombre completo" required autocomplete="cc-name">
          </div>
            <div class="row g-3">
              <div class="col-6">
                <label class="etiqueta-formulario" for="fecha-expiracion">Fecha de caducidad</label>
                <input type="text" id="fecha-expiracion" class="campo-formulario form-control" placeholder="MM/AA" required inputmode="numeric" autocomplete="cc-exp">
              </div>
              <div class="col-6">
                <label class="etiqueta-formulario" for="cvv">CVV</label>
                <input type="password" id="cvv" class="campo-formulario form-control" placeholder="123" maxlength="4" required inputmode="numeric" autocomplete="cc-csc">
              </div>
            </div>
        </form>

        <!-- FORM PAYPAL -->
        <form id="form-paypal" class="formulario-tarjeta formulario-pago d-none" novalidate>
          <div class="mb-3">
            <label class="etiqueta-formulario" for="paypal-email">Correo PayPal</label>
            <input type="email" id="paypal-email" class="campo-formulario form-control" placeholder="tu-email@ejemplo.com" required>
          </div>
          <div class="mb-3">
            <label class="etiqueta-formulario" for="paypal-pass">Contraseña</label>
            <input type="password" id="paypal-pass" class="campo-formulario form-control" placeholder="Tu contraseña" required>
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="recordar-paypal">
            <label for="recordar-paypal" class="form-check-label">Recordar mi cuenta</label>
          </div>
        </form>

        <!-- FORM MOVIL -->
        <form id="form-movil" class="formulario-tarjeta formulario-pago d-none" novalidate>   
          <div class="mb-3">
            <label class="etiqueta-formulario" for="movil-email">Correo electrónico</label>
            <input type="email" id="movil-email" class="campo-formulario form-control" placeholder="tu-email@ejemplo.com" required>
          </div>
          <div class="alert alert-info p-2 small mb-3" style="background:#2c5aa0;border:none;">
            <i class="fas fa-info-circle me-1"></i> Serás redirigido a Apple Pay o Google Pay para completar el pago.
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="terminos-movil" required>
            <label class="form-check-label" for="terminos-movil">Acepto los términos y condiciones</label>
          </div>
        </form>

        <div class="text-end mt-3">
          <button id="boton-pagar" class="boton-pagar" type="button" onclick="redirigirAPagar(); mostrarMetodoPago(document.querySelector('input[name=&quot;metodo_pago&quot;]:checked').value);">Pagar</button>
          <script>
            function validarFormularios() {
       
              const metodo = document.querySelector('input[name="metodo_pago"]:checked').value;
              let form;
              if (metodo === "tarjeta") form = document.getElementById("form-tarjeta");
              else if (metodo === "paypal") form = document.getElementById("form-paypal");
              else if (metodo === "movil") form = document.getElementById("form-movil");
              if (!form) return false;
        
              const campos = form.querySelectorAll("[required]");
              for (const campo of campos) {
                if (!campo.value || (campo.type === "checkbox" && !campo.checked)) {
                  campo.focus();
                  return false;
                }
              }
              return true;
            }

            function redirigirAPagar() {
              if (validarFormularios()) {
                window.location.href = "pagar.html";
              } else {
                alert("Por favor, completa todos los campos requeridos.");
              }
            }
          </script>
        </div>
      </div>

      <!-- Columna resumen -->
      <div class="col-12 col-lg-4">
        <div class="tarjeta-resumen" id="tarjeta-resumen">
          <h5>Resumen</h5>
          <div id="lista-resumen">
            <!-- Items dinámicos -->
          </div>
          <div class="item-resumen total">
            <span class="titulo-resumen">Total</span>
            <span class="valor-resumen" id="total-compra">$0.00</span>
          </div>

  <div class="item-resumen subtotal">
    <span class="titulo-resumen">Subtotal</span>
    <span class="valor-resumen" id="total-neto">$0.00</span>
  </div>

    <div class="item-resumen impuestos">
      <span class="titulo-resumen">Impuestos</span>
      <span class="valor-resumen" id="impuesto-acobrar">$0.00</span>
    </div>

        </div>
      </div>
    </div>
  </div>
</main>
<footer class="footer text-white mt-auto">
    <div class="container py-4">
      <div class="row gy-4 align-items-start">
        <div class="col-12 col-md-4">
          <h5 class="fw-bold mb-2">Aim Control</h5>
          <ul class="list-unstyled footer-links mb-0">
            <li><a href="acercade.html">Acerca de</a></li>
            <li><a href="contactenos.html">Contáctenos</a></li>
          </ul>
        </div>
        <div class="col-12 col-md-4">
          <h6 class="text-secondary mb-2">Ofertas personalizadas</h6>
          <form class="d-flex flex-column flex-sm-row gap-2">
            <input type="email" class="form-control form-control-sm" placeholder="correo@ejemplo.com" aria-label="Correo">
            <button type="button" class="btn btn-accent btn-sm">Suscribirse</button>
          </form>
        </div>
        <div class="col-12 col-md-4">
          <h6 class="text-secondary mb-2">Síguenos</h6>
         <div class="d-flex flex-wrap gap-3">
        <a href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
          <img src="img/Logos/facebook.png" width="30" height="30" alt="Facebook">
        </a>
        <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
          <img src="img/Logos/twitter.png" width="30" height="30" alt="Twitter">
        </a>
        <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <img src="img/Logos/instagram.png" width="30" height="30" alt="Instagram">
        </a>
        <a href="https://www.youtube.com/watch?v=2XhVg38cDTU" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
          <img src="img/Logos/youtube.png" width="30" height="30" alt="YouTube">
        </a>
      </div>
        </div>
      </div>
      <hr class="footer-divider my-4">
      <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center gap-3 small">
        <p class="mb-0">&copy; 2023 Aim Control. Todos los derechos reservados.</p>
        <div class="d-flex align-items-center flex-wrap gap-2">
          <span class="text-accent fw-semibold">Canales</span>
          <img src="img/Otros/visa.png" width="36" height="36" alt="Visa">
          <img src="img/Otros/logotipo-de-paypal.png" width="36" height="36" alt="PayPal">
          <img src="img/Otros/pago-de-apple.png" width="36" height="36" alt="Apple Pay">
          <img src="img/Otros/redondo.png" width="36" height="36" alt="Mastercard">
        </div>
      </div>
    </div>
  </footer>


<script src="js/bootstrap.bundle.min.js"></script>
<script src="javascript/Zona-Compra.js"></script>
  <script src="json/digitalkey.juegos.js"></script>
  <script src="javascript/compra.js"></script>
  <script src="javascript/compra-detalle.js"></script>
 
 <script>
    document.addEventListener('DOMContentLoaded', showDetail);
  </script>

</body>
</html>